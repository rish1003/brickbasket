{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vendor Dashboard - BrickBasket</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/vendor/vendor.css' %}">

</head>

<body>
  {% include 'vendor/navbar.html' %}



  <div class="vendor-container">

    <div class="page-header">
      <h1>Vendor Dashboard</h1>
      <p>Manage orders</p>
    </div>


    <div class="stats-grid">
      <div class="stat-card">
        <h3>New Orders</h3>
        <div class="value">{{ new_orders_count }}</div>
      </div>

      <div class="stat-card">
        <h3>Shipped</h3>
        <div class="value">{{ shipped_orders_count }}</div>
      </div>

      <div class="stat-card">
        <h3>Delivered</h3>
        <div class="value">{{ delivered_orders_count }}</div>
      </div>

    </div>


    <!-- <div class="section-card">
      <h2>
        <span>Pending Order Acceptance</span>
        <span class="badge-custom badge-pending">{{ pending_vendors_count|default:"0" }} Pending</span>
      </h2>

      <table class="custom-table">
        <thead>
          <tr>
            <th>Order ID</th>
            <th>Product Name</th>
            <th>Quantity</th>
            <th>Sub Total</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for order in pending_vendor_list %}
          <tr>
            <td>{{ vendor.user.username }}</td>
            <td>{{ vendor.user.email }}</td>
            <td>{{ vendor.company_name }}</td>
            <td>{{ vendor.user.date_joined|date:"M d, Y" }}</td>
            <td><span class="badge-custom badge-pending">Pending</span></td>
            <td>
              <div class="action-buttons">
                <form method="POST" action="{% url 'approve_vendor' vendor.vendor_id %}" style="display:inline;">
                  {% csrf_token %}
                  <button type="submit" class="btn-primary-custom btn-sm">Approve</button>
                </form>
                <form method="POST" action="{% url 'reject_vendor' vendor.vendor_id %}" style="display:inline;">
                  {% csrf_token %}
                  <button type="submit" class="btn-secondary-custom btn-sm">Reject</button>
                </form>
              </div>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6" style="text-align: center; color: #666;">No pending vendor registrations</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div> -->


    <div class="section-card">
      <h2>Recent Orders</h2>

      <table class="custom-table">
        <thead>
          <tr>
            <th>Order ID</th>
            <th>User</th>
            <th>Total Amount</th>
            <th>Status</th>
            <th>Placed On</th>
            <th>Updated</th>
          </tr>
        </thead>

        <tbody>
          {% for order in recent_orders %}
          <tr>
            <td>#{{ order.order_id }}</td>
            <td>{{ order.user.username }}</td>
            <td>â‚¹{{ order.total_amount }}</td>
            <td>{{ order.order_status|capfirst }}</td>
            <td>{{ order.created_at|date:"M d, Y H:i" }}</td>
            <td>{{ order.updated_at|date:"M d, Y H:i" }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" style="text-align:center; color:#666;">No recent orders</td>
        </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


</body>

</html>